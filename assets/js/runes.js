// Generated by CoffeeScript 1.6.2
(function() {
  $(document).ready(function() {
    var addRune;

    $(".collapse").collapse();
    $("ul.mark li, ul.seal li, ul.glyph li, ul.quintessence li").draggable({
      appendTo: "body",
      helper: "clone"
    }).on("dblclick", function() {
      var elem, image, type;

      elem = $(this)[0].dataset;
      type = $(this).parent().attr('class');
      image = elem.img;
      return addRune(type, image);
    }).on("mousedown", function(e) {
      var elem, image, type;

      if (e.button === 2) {
        elem = $(this)[0].dataset;
        type = $(this).parent().attr('class');
        image = elem.img;
        return addRune(type, image);
      }
    });
    $(".rune-page").droppable({
      drop: function(event, ui) {
        var elem, image, type;

        elem = ui.draggable[0].dataset;
        type = $(ui.draggable[0]).parent().attr('class');
        image = elem.img;
        return addRune(type, image);
      }
    });
    $('.rune-page, ul.mark li, ul.seal li, ul.glyph li, ul.quintessence li').bind("contextmenu", function() {
      return false;
    });
    $('.rune-page div[class*=mark], .rune-page div[class*=seal], .rune-page div[class*=glyph]').on("mousedown", function(e) {
      if (e.button === 2) {
        $(this).children().removeAttr('class');
        return $(this).addClass('empty');
      }
    }).on("dblclick", function() {
      $(this).children().removeAttr('class');
      return $(this).addClass('empty');
    });
    return addRune = function(type, image) {
      var newElem;

      if ($(".rune-page div[class*=" + type + "][class*=empty]").length) {
        newElem = $(".rune-page div[class*=" + type + "][class*=empty]").first();
        return newElem.removeClass('empty').children().addClass("icn-" + image);
      }
    };
  });

}).call(this);
